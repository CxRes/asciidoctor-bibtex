#!/usr/bin/env ruby

require "asciidoc-bib"

bibfile = AsciidocBib.find_bibliography "."
if bibfile.empty?
  bibfile = AsciidocBib.find_bibliography "#{ENV['HOME']}/Documents"
end
if bibfile.empty?
  puts "Error: could not find a bibliography file"
  exit
end
puts "Reading biblio: #{bibfile}"

biblio = AsciidocBib.read_bibliography bibfile

cites_used = AsciidocBib.read_citations ARGV[0]
puts "Cites: #{cites_used.join(",")}"

AsciidocBib.add_citations(ARGV[0], cites_used, biblio)

